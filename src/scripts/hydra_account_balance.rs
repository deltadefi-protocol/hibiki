use super::types::UserAccount;
use crate::config::AppConfig;
use crate::scripts::MintPolarity;
use whisky::data::{byte_string, Value};
use whisky::utils::blueprint::MintingBlueprint;
use whisky::{utils::blueprint::SpendingBlueprint, LanguageVersion};
use whisky::{BuilderDataType, ConstrEnum};

#[derive(Debug, Clone, ConstrEnum)]
pub enum HydraAccountBalanceRedeemer {
    UpdateBalanceWithPlaceOrder,
    UpdataBalanceWithFillOrder,
    UpdataBalanceWithCancelOrder,
    UpdataBalanceWithReleaseExtraValue,
    UpdateBalanceWithWithdrawal,
    UpdateBalanceWithCancelWithdrawal,
    UpdateBalanceWithTransfer,
    HydraCombineUtxosAtClose,
    HydraAccountBalanceRemoveEmptyBalance,
}

#[derive(Debug, Clone, ConstrEnum)]
pub enum HydraAccountBalanceDatum {
    Datum(UserAccount, Value),
}

pub fn hydra_account_balance_spending_blueprint(
) -> SpendingBlueprint<(), HydraAccountBalanceRedeemer, HydraAccountBalanceDatum> {
    let AppConfig {
        network_id,
        dex_oracle_nft,
        ..
    } = AppConfig::new();
    let mut blueprint =
        SpendingBlueprint::new(LanguageVersion::V3, network_id.parse().unwrap(), None);
    blueprint
    .param_script(
        "590b2b010100229800aba2aba1aba0aab9faab9eaab9dab9a9bae0024888888896600264653001300900198049805000cdc3a400530090024888966002600460126ea800e33001300a3754007370e90024dc3a40013009375400891114c004c044012602260240091980098071baa0059180918099809800c8c048c04c0066e95200091192cc004c01400626464b300130170028024590141bae3015001301137540071598009804800c4c8c966002602e0050048b2028375c602a00260226ea800e2c807900f18079baa00291191919800800802112cc00400629422b30013375e0066024602c00314a31330020023017001404480a0cdd2a4004660246ea40052f5c1300d3754010911111119914c004c06cc06cc06c00a4464b3001300e0018992cc004c07c00626600a603c00200716407060346ea800e2b300130120018992cc004c07c00626600a603c00200716407060346ea800e2b3001300f0018992cc004c07c00626600a603c00200716407060346ea800e2c80c10182030301837540052232330010010032259800800c530103d87a8000899192cc004cdc8802800c56600266e3c014006260186603e603a00497ae08a60103d87a8000406d1330040043021003406c6eb8c06c004c07800501c2444664530013756603e0053758603e6040604000530203020302030203020302030203020302030200019bae301f00148888ca6002604800330243025302530250019bab302400a9bae302400348889660026032023133012009375c605060526052605260526052605260526052604a6ea800e2b3001301d0118998090049bae302830293029302930293029302930293029302930253754007159800980d008c4cc048024dd71814181498149814981498149814981498149814981498129baa0038acc004cdc3a400c023133012009375c605060526052605260526052605260526052605260526052604a6ea800e2b30013370e9004008c4cc048024dd7180b18129baa0038acc004cdc3a4014023133012009375c6050605260526052604a6ea800e2b30013370e9006008c4cc048024dd71814181498149814981498129baa0038acc004cdc3a401c023133012009375c602a604a6ea800e2b30013370e9008008c4c966002605400313259800980d98131baa00189919192cc004c0b800a266024605a0062646600200444b30010028992cc004c0c80062b30013375e6e98c8cc004004018896600200314bd6f7b63044c8c8cc88cc88cc0080080048966002003133038337606ea400cdd300225eb7bdb1822653001375c606c0033756606e003303b00248896600266e4001c00e26607866ec0dd48039ba60080058acc004cdc7803801c4c966002605e60746ea800626607a66ec0dd4804181f181d9baa00100288012072689981e19bb037520066e98008cc0180180050382070181c800a06e330060063038005323200332330010010032259800800c5268992cc0040062b30013004375a606c6072005149a2c81a226644b3001337206eb8c0dc008dd7181b800c566002600c6eb4c0e000a26600a00a6607400260780071640d91640d86072004607200281b8c0e400503614c004c09c0069429450311bae3031002375660620026066002818930101a0008acc004cdc39bad302e3031001480062646600200202444b30010018a508acc004cdc79bae30330010118a51899801001181a000a05c40c514a08162294102c45902f192cc004c098c0b4dd5000c52f5bded8c1137566062605c6ea800502c1980a005004c4c8c8cc014dd59817801112cc00400a2600a606a00d132332230043038005375c60620026eb4c0c8004c0d00090321bae302d001303000240b8446466002002006446600600260040051640ac6eacc0b0004c0b0004c09cdd5000c59025192cc004c070c098dd5000c4c0a8c09cdd5000c59025180b98131baa301630263754605200316409c64660020026eb0c0a4060896600200314bd7044cc8966002b30013375e605860526ea8c064c0a4dd500100444c8cc004004c8cc004004dd5980d98159baa301b302b375400844b30010018a5eb82264664466446600400400244b30010018801c4c8cc0d0dd39981a1ba90053303430310013303430320014bd7019801801981b001181a000a0643756605e0066eb8c0b0004cc00c00cc0c4008c0bc00502d112cc00400629422b30013371e6eb8c0b8dd61817000803c528c4cc008008c0bc00502920588a50409d13302b00233004004001899802002000a04e302a001302b00140a1133012009375c605060526052605260526052604a6ea800d0232046408c81190232046408c81190230c090008603c603c00660346ea8cc8966002602060366ea8006264b30013011301c3754003132323232323232323232323232323298009817800cdd71817807cdd718178074dd718178064dd71817805cc0bc02a6eb8c0bc026605e011375c605e00f302f0069bae302f00598178024dd71817801cc0bc0092222222222222259800981f007c4cc088c0f406c4cc0800244cc08001c4cc0800144cc08000c4cc080004566002605c60726ea803a26464646464646464646464653001375c6092003375c6092019375c6092017375c6092015375c6092013375c6092011375c609200f375c609200d375c609200b375c6092009375c6092007375c60920049111111111112cc004c158036206d16414c3049001304800130470013046001304500130440013043001304200130410013040001303f001303a375401d1640e11640ec302f001302e001302d001302c001302b001302a00130290013028001302700130260013025001302400130230013022001301d375400316406c6464b300130120018b4566002602c0031689810980f1baa002407080e0c070dd50009806980e1baa300c301c3754603e60386ea80062c80d08966002602060366ea800a2646464b3001302300289980698110018992cc004c050006264b30013025001899192cc004c05c006264b300130280018998091813800804c5902518119baa0028acc004c06c00626464653001375a6052003375a6052007375a60520049112cc004c0b401201d1640a830290013028001302337540051640848108c084dd50009812000c5902218101baa0028acc004c0600062b3001302037540050058b20428b203c4078603c6ea80062c8100c084004c084004c070dd500145901a19198008009bac301e0062259800800c5300103d87a80008992cc004c054c966002602c603a6ea80062900044dd69810980f1baa001407064b30013016301d375400314c103d87a8000899198008009bab3022301f375400444b30010018a6103d87a8000899192cc004cdc8a45000018acc004cdc7a441000018980899812181100125eb82298103d87a80004081133004004302600340806eb8c080004c08c0050212038330043756601a603a6ea8c034c074dd500080d44c030cc07c0052f5c11330030033021002406c603e00280e8603200e44b3001300b3016375400513232323322598009810001c4cc028c07c0104cc02800801a2c80e8c074004dd7180e801980e800980e000980b9baa0028b202a2444b300130050048acc004c044dd5005c0062c80922b300130090048acc004c044dd5005c0062c80922b300130060048acc004c044dd5005c0062c80922b30013370e9003002456600260226ea802e00316404915980099b87480200122b3001301137540170018b20248acc004cdc3a401400915980098089baa00b800c59012456600266e1d200c0048acc004c044dd5005c0062c80922b30013370e9007002456600260226ea802e00316404915980099b87480400122b3001301137540170018b20248acc004cdc3a402400915980098089baa00b800c5901245900f201e403c807900f201e403c807900f201e22c8040601200260086ea802629344d9590021",
&[&byte_string(&dex_oracle_nft).to_string(), ],BuilderDataType::JSON,)
    .unwrap();
    blueprint
}
pub fn hydra_account_balance_minting_blueprint() -> MintingBlueprint<(), MintPolarity> {
    let AppConfig { dex_oracle_nft, .. } = AppConfig::new();
    let mut blueprint = MintingBlueprint::new(LanguageVersion::V3);
    blueprint
    .param_script(
        "590a3a010100229800aba2aba1aba0aab9faab9eaab9dab9a9bae0024888888896600264653001300900198049805000cdc3a400130090024888966002600460126ea800e266446644b300130060018acc004c038dd5004400a2c807a2b300130030018acc004c038dd5004400a2c807a2c806100c099191919194c004dd6180a180a980a800c8c054c058c0580064646600200200444b30010018a5eb82264664466446600400400244b30010018801c4c8cc070dd39980e1ba90053301c30190013301c301a0014bd7019801801980f001180e000a0343756602e0066eb8c050004cc00c00cc064008c05c0050154dd5980a00124444b3001300d3014375401f1332232980091192cc004c04c006264b30013020001899802980f800801c5901d180d9baa0038acc004c040006264b30013020001899802980f800801c5901d180d9baa0038acc004cdc3a4008003132598009810000c4cc014c07c00400e2c80e8c06cdd5001c590192032406460326ea800a46038603a0032232330010010032259800800c530103d87a8000899192cc004cdc8802800c56600266e3c0140062601266040603c00497ae08a60103d87a80004071133004004302200340706eb8c070004c07c00501d244464646644b30013232330010013756604802244b30010018a508acc004cdd780198109812800c528c4cc008008c09800502020463374a9001198109811180f9baa30223023302330230034bd704528c4cc8966002604a00313259800980d18109baa00189919192cc004c0a400a26601a60500062646600200444b30010028992cc004c0b40062b300100a8acc004cdd79ba632330010010062259800800c52f5bded8c11323233223322330020020012259800800c4cc0cccdd81ba9003374c00897adef6c608994c004dd71818800cdd59819000cc0d80092225980099b9000700389981b99bb0375200e6e980200162b30013371e00e007132598009817181a9baa00189981c19bb037520106072606c6ea800400a200481a1a26606e66ec0dd48019ba60023300600600140cc819860680028190cc018018c0cc014c8c800cc8cc00400400c8966002003149a264b30010018acc004c010dd69818981a00145268b205e899912cc004cdc81bae3032002375c606400315980098031bad30330028998028029981a800981b801c59031459031181a001181a000a064303400140c4530013026001a50a5140b06eb8c0b0008dd598160009817000a0584c0101a0008acc004c078dd698149816000c4c8cc004004064896600200314a115980099b8f375c605c00201b14a3133002002302f00140a4816229410274528204e8a50409d1640a864b3001301e3028375400314bd6f7b63044dd5981618149baa001409c6601c02803d13232330053756605400444b300100289802981800344c8cc88c010c0cc014dd718160009bad302d001302f00240b46eb8c0a0004c0ac009029111919800800801911980180098010014590261bab302700130270013022375400316408064b30013370e900218109baa0018981298111baa0018b2040302430253025302137546048003164088b300132330010013758604602844b30010018a5eb8226644b3001323300100130113756601660486ea8c02cc090dd5001912cc00400629422b30013371e6eb8c0a0dd6181400080dc528c4cc008008c0a4005023204c89981280119802002000c4cc01001000502118120009812800a0448a518a50408064660020026eb0c08c048896600200314bd7044cc8966002b30013375e604c60466ea800801a2646600200264660020026eacc0a0c0a4c094dd5002112cc004006297ae0899199119198008009bab302a0042259800800c400e2646605c6e9ccc0b8dd4802998171815800998171816000a5eb80cc00c00cc0c0008c0b800502c1bae302600133003003302b0023029001409c44b30010018a508acc004cdc79bae30283758605000203714a31330020023029001408c8132294102144cc094008cc0100100062660080080028108c090004c094005022203a3020001375c60400046040604060406040604060406040604060406040604000260366ea8cc8966002602a60386ea8006264b30013016301d3754003132323232323232323232323232323298009818000cdd71818007cdd718180074dd718180064dd71818005cc0c002a6eb8c0c00266060011375c606000f30300069bae303000598180024dd71818001cc0c00092222222222222259800981f807c4cc08cc0f806c4cc0800244cc08001c4cc0800144cc08000c4cc080004566002606660746ea803a26464646464646464646464653001375c6094003375c6094019375c6094017375c6094015375c6094013375c6094011375c609400f375c609400d375c609400b375c6094009375c6094007375c60940049111111111112cc004c15c036206d164150304a0013049001304800130470013046001304500130440013043001304200130410013040001303b375401d1640e51640f03030001302f001302e001302d001302c001302b001302a0013029001302800130270013026001302500130240013023001301e37540031640706464b300130170018b456600260280031689811180f9baa002407480e8c074dd50009805980e9baa3004301d37546040603a6ea80062c80d88966002602a60386ea800a2646464b3001302400289980518118018992cc004c064006264b30013026001899192cc004c070006264b300130290018998079814000804c5902618121baa0028acc004c06400626464653001375a6054003375a6054007375a60540049112cc004c0b801201d1640ac302a0013029001302437540051640888110c088dd50009812800c5902318109baa0028acc004c0580062b3001302137540050058b20448b203e407c603e6ea80062c8108c088004c088004c074dd500145901b19198008009bac301f00f2259800800c5300103d87a80008992cc004c04cc9660026028603c6ea80062900044dd69811180f9baa001407464b30013014301e375400314c103d87a8000899198008009bab30233020375400444b30010018a6103d87a8000899192cc004cdc8a45000018acc004cdc7a441000018980719812981180125eb82298103d87a80004085133004004302700340846eb8c084004c090005022203a330043756600a603c6ea8c014c078dd500080dc4c024cc0800052f5c113300300330220024070604000280f044b300130113018375400513232323322598009811001c4cc020c0840104cc02000801a2c80f8c07c004dd7180f801980f800980f000980c9baa0028b202e374a900011192cc004c04000626464b3001301e00280245901b1bae301c001301837540071598009806800c4c8c966002603c0050048b2036375c603800260306ea800e2c80b1016180b1baa002899198008009801801112cc00400629462b3001325980099b8f375c603600201d1337106eb4c01800520008a5140586eb0c068006266004004603600314a080a90182026180a180a000980998098009809000980880098061baa003300b375400c6eb8c034c028dd50019b874800a2c8040601200260086ea802629344d95900201",
&[&byte_string(&dex_oracle_nft).to_string(), ],BuilderDataType::JSON,)
    .unwrap();
    blueprint
}

// used for migration from belvedere to hibiki
// #[cfg(test)]
// mod tests {

//     use super::*;
//     use dotenv::dotenv;

//     #[test]
//     fn test_hydra_account_balance_spending_blueprint() {
//         dotenv().ok();

//         let blueprint = hydra_account_balance_spending_blueprint();
//         assert_eq!(
//             blueprint.hash,
//             "1318e21d5eb0eb93f23a4d9a52592db44dd48e971fe6de91a8c14071"
//         );
//         assert_eq!(
//           blueprint.cbor,
//           "58b658b40101009800aba2a6011e581cfa5136e9e9ecbc9071da73eeb6c9a4ff73cbf436105cf8380d1c525c00a6010847392d7370656e640048c8c8c8c88c88966002646464646464660020026eb0c038c03cc03cc03cc03cc03cc03cc03cc03cc030dd5180718061baa0072259800800c52844c96600266e3cdd71808001005c528c4cc00c00c00500d1808000a01c300c300d002300b001300b002300900130063754003149a26cac8028dd7000ab9a5573caae7d5d09"
//       );
//     }

//     #[test]
//     fn test_hydra_account_balance_minting_blueprint() {
//         dotenv().ok();

//         let blueprint = hydra_account_balance_minting_blueprint();
//         assert_eq!(
//             blueprint.hash,
//             "c828db378a1b202822e9de2a6d461af04b016768bce986176af87ba5"
//         );
//         assert_eq!(
//           blueprint.cbor,
//           "58b558b30101009800aba2a6011e581cfa5136e9e9ecbc9071da73eeb6c9a4ff73cbf436105cf8380d1c525c00a6010746392d6d696e740048c8c8c8c88c88966002646464646464660020026eb0c038c03cc03cc03cc03cc03cc03cc03cc03cc030dd5180718061baa0072259800800c52844c96600266e3cdd71808001005c528c4cc00c00c00500d1808000a01c300c300d002300b001300b002300900130063754003149a26cac8028dd7000ab9a5573caae7d5d09"
//       );
//     }
// }
